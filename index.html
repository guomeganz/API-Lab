
<!DOCTYPE html>
<html lang="en" >

<head>
  <meta charset="UTF-8">
  

    <link rel="apple-touch-icon" type="image/png" href="https://cpwebassets.codepen.io/assets/favicon/apple-touch-icon-5ae1a0698dcc2402e9712f7d01ed509a57814f994c660df9f7a952f3060705ee.png" />

    <meta name="apple-mobile-web-app-title" content="CodePen">

    <link rel="shortcut icon" type="image/x-icon" href="https://cpwebassets.codepen.io/assets/favicon/favicon-aec34940fbc1a6e787974dcd360f2c6b63348d4b1f4e06c77743096d55480f33.ico" />

    <link rel="mask-icon" type="image/x-icon" href="https://cpwebassets.codepen.io/assets/favicon/logo-pin-b4b4269c16397ad2f0f7a01bcdf513a1994f4c94b8af2f191c09eb0d601762b1.svg" color="#111" />



  
    <script src="https://cpwebassets.codepen.io/assets/common/stopExecutionOnTimeout-2c7831bb44f98c1391d6a4ffda0e1fd302503391ca806e7fcc7b9b87197aec26.js"></script>


  <title>CodePen - Name Generator API</title>

    <link rel="canonical" href="https://codepen.io/elbrittono/pen/oNXBRNo">
  
  
  <link rel='stylesheet' href='https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/4.1.3/css/bootstrap.min.css'>
  
<style>
aside {
  float: right;
  width: 40%;
  font-size: 1.3em;
  padding: 1em 1.5em;
  margin: 0.5em;
  text-align: center;
  font-style: italic;
  background: #efefef;
  border-radius: 0.5em;
}

h2, h3, h4 {
  margin-top: 1em;
}

.card h2 {
  margin-top: 0;
}
</style>

  <script>
  window.console = window.console || function(t) {};
</script>

  
  
</head>

<body translate="no">
  <div class="container">
  <h1>Name Generator API Call</h1>
  <p>Scroll down for instructions.</p>
  
    <div class="form-container card card-body bg-light">
    <h2>Fake Name Generator</h2>
    <div class="alert alert-primary d-none" id="result">
      Put your generated fake name here.
    </div>

    <form id="name-form">
      <div class="form-group">
        <label for="first-name">First Name</label>
        <input type="text" class="form-control" id="first-name" value="Michael" required>
      </div>
      <div class="form-group">
        <label for="last-name">Last Name</label>
        <input type="text" class="form-control" id="last-name" value="Scott" required>
      </div>
  <!--     <div class="form-check">
        <input class="form-check-input" type="radio" name="gender" id="gender-male" value="m">
        <label class="form-check-label" for="gender-male">
          Male
        </label>
      </div>
      <div class="form-check">
        <input class="form-check-input" type="radio" name="gender" id="gender-female" value="f">
        <label class="form-check-label" for="gender-female">
          Female
        </label>
      </div> -->
      <button type="submit" class="btn btn-primary mb-2">Go</button>
    </form>
  </div>
  <!-- End of .form-container div -->
  
  <h2>Instructions</h2>
  <aside>No CSS changes are required for this lab.</aside>
  <p>In this lab, you'll use form data to make an API call, and then display the response in your webpage.</p>
  <p>You'll make a GET AJAX request, putting your form data into the URL that you'll send. The API will return a JSON object containing the generated name. <strong>When you are finished, submit your forked Codepen URL to Canvas</strong>.</p>
  <h2>Instructions</h2>
  <ol>
    <li>Get an API key <a href="https://cse204.work/api-key" target="_blank">here</a>: <a href="https://cse204.work/api-key" target="_blank">https://cse204.work/api-key</a></li>
    <li>Flesh out the Javascript functions.</li>
    <li>Test the form to make sure it works.</li>
  </ol>
  
  <hr>
  <h2>Detailed Instructions</h2>
  <h3>1. Get Your API Key</h3>
  <p>Your API key will serve to authenticate you instead of using a username and password. You must use your Washingon University school email address.</p>
  <h3>2. Javascript Functions</h3>
  <p>The functions have already been stubbed out for you. Let's walk through them one by one.</p>
  <h4>The <code>displayFakeName(name)</code> Function</h4>
  <p>This function will simply take a string and display it on the page.</p>
  <p>You can test out by just calling displayFakeName("Test Name"). Get your text to display in the <code>#result</code> div by using <code>getElementById()</code> and then set it's <code>innerText</code> property.</p>
  <h4>The <code>buildApiUrl()</code> Function</h4>
  <p>Your finished URL should look something like this: <code> http://cse204.work/name/superhero/clark/kent</code> </p>
  <p>The function already has things spelled out for you. If you're having a hard time, try adding <code>value</code> attributes to the input elements and fill in test data. Then you can call the function directly in your code to test it.</p>
  <aside>The API is only built for English alphabet characters, and may return errors for unsupported characters.</aside>
  <h4>The <code>getFakeNameFromApi()</code> Function</h4>
  <p>You will use your <em>API key</em> to authenticate with the API. You'll pass it in the HTTP headers like this: <code>xhttp.setRequestHeader("x-api-key", "abc123");</code>
  </p>
  <pre class="well" style="border: solid 1px gray;">
var xhttp = new XMLHttpRequest();

xhttp.onreadystatechange = function() {
    if (this.readyState == 4 && this.status == 200) {
        var nameObject = JSON.parse(this.responseText);
        console.log(nameObject);
        displayFakeName(nameObject.name);
    }
};

xhttp.open("GET", "https://cse204.work/name/superhero/clark/kent", true);
xhttp.setRequestHeader("x-api-key","abc123-this-is-your-api-key");
xhttp.send();
</pre>
  <p>The API will return a JSON object that looks something like this: <code>{ name: "Firstname Lastname" }</code></p>
  <p>You'll need to grab the <code>name</code> property from the object.</p>

  <h3>3. Test the form to make sure it works.</h3>
  
  <h3>Optional/Advanced</h3>
  <p>To use the Harry Potter name generator API, build a URL that looks like this: <code>https://cse204.work/name/harrypotter/firstname/lastname/gender</code> where <code>gender</code> is either <code>m</code> or <code>f</code>.<p>
  <p>Here's an example URL for the Harry Potter API: <code> http://cse204.work/name/harrypotter/Daniel/Radcliffe/m</code></p>
  <p>The form already has a drop-down menu for gender, but it's commented out. You'll have to uncomment it and then modify your <code>buildApiUrl()</code> function.</p>
</div>
  
      <script id="rendered-js" >
function getFakeNameFromApi() {
  event.preventDefault(); // This prevents the form from reloading the page!
  var url = buildApiUrl(); // Call the buildApiUrl() function to get the URL.

  // @TODO: Fill in this function to do the following:

  // 2. Make an AJAX call to the API and save the generated name in a variable.

  // 3. Call the displayFakeName() function from within your onreadystatechange function, and pass in the generated name.

  console.log("If you see this in the console, the getFakeNameFromApi() function was called.");
}

function buildApiUrl() {
  var baseUrl = 'https://cse204.work/name/superhero/';

  // @TODO: Modify this function so that it gets the first name and last name from the form 
  // using the document.getElementById() function and the .value property.

  var firstName = ''; // Get this via DOM from the first-name input
  var lastName = ''; // Get this via DOM from the last-name input

  // Here we build the URL. You don't have to modify the rest of this function.
  var finishedUrl = baseUrl + firstName + '/' + lastName;

  // Return the finished URL:
  console.log(finishedUrl); // Sanity check! Did your URL come out the way you expected it to?
  return finishedUrl;
}

function displayFakeName(name) {
  // @TODO: Modify this function so that it displays the name variable in the #result div.
  // Use DOM methods to take the `name` variable and set the innerHTML property of #result.

  // Bootstrap provides a "d-none" class (it stands for "display: none") that's used to hide a div.
  // Make sure you remove the Bootstrap "d-none" helper class so that the div is displayed. Try using .classList.remove() on your DOM element.
}

// Below we use addEventListener() to bind the getFakeNameFromApi() function to the submit event of the #name-form form.
const formElement = document.getElementById("name-form");
formElement.addEventListener("submit", getFakeNameFromApi, false);
//# sourceURL=pen.js
    </script>

  
</body>

</html>
